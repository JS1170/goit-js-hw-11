{"mappings":"AAEO,SAASA,EAAWC,GACvB,MAAMC,EAAaD,EAAKE,KAAI,EAACC,aAAEA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,KAC/E,+CACKN,WAAsBE,oIAGfC,yFAGAC,2FAGGC,4FAGCC,wDAK3BC,EAAKC,IAAIC,mBAAmB,YAAaX,EAAWY,KAAK,KCjBtD,MAAMH,EAAO,CAClBI,WAAYC,SAASC,cAAc,gBACnCL,IAAKI,SAASC,cAAc,YAC5BC,YAAaF,SAASC,cAAc,eAGhCE,EAAkB,ICTT,MAObC,gBACE,MAAMC,EAAM,qEAAqEC,KAAKC,gFAAgFD,KAAKE,iBAAiBF,KAAKG,OAEjM,OAAOC,MAAML,GACVM,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACFR,KAAKS,gBAEAD,EAAK7B,QAIlB8B,gBACET,KAAKG,MAAQ,EAGfO,YACEV,KAAKG,KAAO,EAGVQ,YACF,OAAOX,KAAKC,YAGVU,UAAMC,GACR,OAAQZ,KAAKC,YAAcW,EA/B7BC,cACEb,KAAKC,YAAc,GACjBD,KAAKG,KAAO,EACZH,KAAKE,SAAW,KDOtBb,EAAKI,WAAWqB,iBAAiB,UAGjC,SAAkBC,GAChBA,EAAEC,iBAEFnB,EAAgBc,MAAQI,EAAEE,cAAcC,SAASjB,YAAYkB,MAC7DtB,EAAgBa,YAChBb,EAAgBC,gBAAgBO,MAAKe,IAsBrC/B,EAAKC,IAAI+B,UAAY,GApBnB3C,EAAW0C,GACmB,IAA1BA,EAAeE,QACjBC,MACE,kFAZRlC,EAAKO,YAAYkB,iBAAiB,SAmBlC,WACEjB,EAAgBC,gBAAgBO,MAAK1B,IACnCD,EAAWC,GACPkB,EAAgBK,SAAWL,EAAgBM,KAAOxB,GACpD4C,MAAM","sources":["src/create-markup.js","src/index.js","src/api-service.js"],"sourcesContent":["import { refs } from './index';\n\nexport function components(hits) {\n    const markupHits = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<div class=\"photo-card\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=300 hight=200/>\n        <div class=\"info\">\n            <p class=\"info-item\">\n                <b>Likes ${likes} </b>\n            </p>\n            <p class=\"info-item\">\n                <b>Views ${views}</b>\n            </p>\n            <p class=\"info-item\">\n                <b>Comments ${comments}</b>\n            </p>\n            <p class=\"info-item\">\n                <b>Downloads ${downloads}</b>\n            </p>\n        </div>\n    </div>`\n    })\n    refs.div.insertAdjacentHTML('beforeend', markupHits.join(''));\n}\n\n","import './common.css';\n// import createMarkup from '.create-markup.js';\nimport { components } from './create-markup';\nimport PhotoApiService from './api-service';\n\nexport const refs = {\n  searchForm: document.querySelector('.search-form'),\n  div: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst photoApiService = new PhotoApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  photoApiService.query = e.currentTarget.elements.searchQuery.value;\n  photoApiService.resetPage();\n  photoApiService.fetchArticles().then(addCompontents => {\n    clearDiv();\n    components(addCompontents);\n    if (addCompontents.length === 0) {\n      alert(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n  });\n}\n\nfunction onLoadMore() {\n  photoApiService.fetchArticles().then(hits => {\n    components(hits);\n    if (photoApiService.per_page * photoApiService.page > hits) {\n      alert(\"We're sorry, but you've reached the end of search results.\");\n    }\n  });\n}\n\nfunction clearDiv() {\n  refs.div.innerHTML = '';\n}\n","// import axios from \"axios\";\n\nexport default class PhotoApiService {\n  constructor() {\n    this.searchQuery = '';\n      this.page = 1;\n      this.per_page = 40;\n  }\n\n  fetchArticles() {\n    const URL = `https://pixabay.com/api/?key=29627581-d6f8c2acd4ff53b2d07d8c597&q=${this.searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${this.per_page}&page=${this.page}`;\n\n    return fetch(URL)\n      .then(response => response.json())\n      .then(data => {\n          this.incrementPage();\n          \n        return data.hits;\n      });\n  }\n    \n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    return (this.searchQuery = newQuery);\n  }\n}\n"],"names":["$5a57a8ba59627fb0$export$9b5ac10f59f76296","hits","markupHits","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$1f0dc3b9307be026$export$21666b427502ea6d","div","insertAdjacentHTML","join","searchForm","document","querySelector","loadMoreBtn","$1f0dc3b9307be026$var$photoApiService","fetchArticles","URL","this","searchQuery","per_page","page","fetch","then","response","json","data","incrementPage","resetPage","query","newQuery","constructor","addEventListener","e","preventDefault","currentTarget","elements","value","addCompontents","innerHTML","length","alert"],"version":3,"file":"index.76b1ed83.js.map"}